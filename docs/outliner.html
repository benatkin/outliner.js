<!DOCTYPE html>  <html> <head>   <title>outliner.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               outliner.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Export Outliner for CommonJS and non-CommonJS environments.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">Outliner</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">exports</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Outliner</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">Outliner</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">Outliner</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Get a reference to Underscore.js and Backbone.js, from the root object or through require().</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">_</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">require</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">))</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;underscore&#39;</span><span class="p">).</span><span class="nx">_</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">Backbone</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">_</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">require</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">))</span> <span class="nx">Backbone</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;backbone&#39;</span><span class="p">);</span>

  <span class="nx">Outliner</span><span class="p">.</span><span class="nx">Leaf</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_attr</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">key</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">resource</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">resource</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">leafType</span> <span class="o">=</span> <span class="s2">&quot;null&quot;</span><span class="p">;</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">leafType</span> <span class="o">=</span> <span class="s2">&quot;empty&quot;</span><span class="p">;</span>
    <span class="k">else</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">leafType</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">Outliner</span><span class="p">.</span><span class="nx">Leaf</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;leaf&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The underscore templates.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">templates</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">link</span><span class="o">:</span> <span class="s1">&#39;&lt;a href=&quot;&lt;%= url %&gt;&quot; class=&quot;leafValue &lt;%= leafType %&gt;&quot;&gt;&lt;%= value %&gt;&lt;/a&gt;&#39;</span><span class="p">,</span>
      <span class="nx">str</span><span class="o">:</span> <span class="s1">&#39;&lt;span class=&quot;leafValue &lt;%= leafType %&gt;&quot;&gt;&lt;%= value %&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
      <span class="nx">text</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;&lt;div class=&quot;leafValueDiv&quot;&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;  &lt;pre class=&quot;leafValue string multiline&quot;&gt;&lt;%= value %&gt;&lt;/pre&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;/div&gt;&#39;</span>
      <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">),</span>
      <span class="nx">leaf</span><span class="o">:</span> <span class="p">[</span>
        <span class="s1">&#39;&lt;div class=&quot;leafRow row&quot;&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;  &lt;div class=&quot;leafKeyDiv leaf&quot;&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    &lt;span class=&quot;leafKey key&quot;&gt;&lt;%= key %&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;    &lt;%= valueSpan %&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;  &lt;/div&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;  &lt;%= valueBlock %&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;/div&gt;&#39;</span>
      <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span>
    <span class="p">},</span>

    <span class="nx">escape</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">escapeHTML</span><span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">attr</span><span class="p">]));</span>
    <span class="p">},</span>

    <span class="nx">leafType</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      
    <span class="p">},</span>

    <span class="nx">renderValue</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="nx">leafType</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">leafType</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">tpl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">str</span><span class="p">,</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="p">{</span><span class="nx">leafType</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="s1">&#39;leafType&#39;</span><span class="p">),</span> <span class="nx">value</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)};</span>
      <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;null&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s1">&#39;&quot;&quot;&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">leafType</span> <span class="o">==</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">tpl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="sr">/^(?:https?|mailto):/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">tpl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">link</span><span class="p">;</span>
        <span class="nx">ctx</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="nx">tpl</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">tpl</span> <span class="o">===</span> <span class="nx">tpl</span><span class="p">.</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">block</span><span class="o">:</span> <span class="nx">html</span> <span class="p">};</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nx">span</span><span class="o">:</span> <span class="nx">html</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rendered</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderValue</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">key</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="s1">&#39;key&#39;</span><span class="p">),</span>
        <span class="nx">valueBlock</span><span class="o">:</span> <span class="nx">rendered</span><span class="p">.</span><span class="nx">block</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">valueSpan</span><span class="o">:</span> <span class="nx">rendered</span><span class="p">.</span><span class="nx">span</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">template</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">templates</span><span class="p">.</span><span class="nx">leaf</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">Outliner</span><span class="p">.</span><span class="nx">ResourceModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
    <span class="nx">defaults</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">naturalSort</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">rootKey</span><span class="o">:</span> <span class="s1">&#39;root&#39;</span>
    <span class="p">},</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;resource&#39;</span><span class="p">,</span>
    <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">},</span>
    <span class="nx">render</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$el</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">$el</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;outliner&#39;</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">appendCollection</span><span class="p">(</span><span class="nx">$el</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;rootKey&#39;</span><span class="p">),</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">));</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>determine types</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">nodeType</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span><span class="p">)</span>
              <span class="o">?</span> <span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">===</span> <span class="s1">&#39;[object Array]&#39;</span> <span class="o">?</span> <span class="s1">&#39;list&#39;</span> <span class="o">:</span> <span class="s1">&#39;map&#39;</span><span class="p">)</span>
              <span class="o">:</span> <span class="s1">&#39;leaf&#39;</span><span class="p">;</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>element creation</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">appendCollection</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$el</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodeType</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">container</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collection&#39;</span><span class="p">);</span>
      
      <span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">childKeys</span><span class="p">,</span> <span class="nx">childKey</span><span class="p">,</span> <span class="nx">childValue</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="s1">&#39;map&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">childKeys</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">childKey</span> <span class="k">in</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">childKey</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">childKeys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">childKey</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;naturalSort&#39;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span>
          <span class="nx">childKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">naturalSort</span><span class="p">);</span>
        <span class="k">else</span>
          <span class="nx">childKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">childKeys</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>construct collection row</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="nx">nodeType</span> <span class="o">==</span> <span class="s2">&quot;map&quot;</span> <span class="o">?</span> <span class="s2">&quot;{}&quot;</span> <span class="o">:</span> <span class="s2">&quot;[]&quot;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collectionItem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">nodeType</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collectionRow row&#39;</span><span class="p">);</span>
      
      <span class="kd">var</span> <span class="nx">keyElem</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">childKeys</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">keyElem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">collectionItem</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">symbol</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collectionKey key&#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">keyElem</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">collectionItem</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">key</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collectionKey key empty&#39;</span><span class="p">);</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span&gt;&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">symbol</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collectionValue empty&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">collectionItem</span><span class="p">);</span>
      <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>construct items</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&#39;</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$el</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;collectionItems&#39;</span><span class="p">);</span>
      
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">childKeys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="s1">&#39;map&#39;</span><span class="p">)</span>
          <span class="nx">childKey</span> <span class="o">=</span> <span class="nx">childKeys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">else</span>
          <span class="nx">childKey</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">childValue</span> <span class="o">=</span> <span class="nx">value</span><span class="p">[</span><span class="nx">childKey</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">(</span><span class="nx">childValue</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;leaf&#39;</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">appendLeaf</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">childKey</span><span class="p">,</span> <span class="nx">childValue</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">appendCollection</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">childKey</span><span class="p">,</span> <span class="nx">childValue</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">appendLeaf</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">leaf</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Outliner</span><span class="p">.</span><span class="nx">Leaf</span><span class="p">({</span>
        <span class="nx">key</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>
        <span class="nx">value</span><span class="o">:</span> <span class="nx">value</span>
      <span class="p">});</span>
      <span class="nx">items</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">leaf</span><span class="p">.</span><span class="nx">render</span><span class="p">());</span>
    <span class="p">}</span>
  <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <h2>Helpers</h2>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="cm">/*  Copyright 2006 The Closure Library Authors. All Rights Reserved.</span>
<span class="cm">   *    </span>
<span class="cm">   *  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="cm">   *  you may not use this file except in compliance with the License.</span>
<span class="cm">   *  You may obtain a copy of the License at</span>
<span class="cm">   *    </span>
<span class="cm">   *       http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="cm">   *    </span>
<span class="cm">   *  Unless required by applicable law or agreed to in writing, software</span>
<span class="cm">   *  distributed under the License is distributed on an &quot;AS-IS&quot; BASIS,</span>
<span class="cm">   *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="cm">   *  See the License for the specific language governing permissions and</span>
<span class="cm">   *  limitations under the License.</span>
<span class="cm">   */</span>
  
  <span class="cm">/* goog.inherits http://code.google.com/p/closure-library/source/browse/trunk/closure/goog/base.js#1421 */</span>
  <span class="kd">var</span> <span class="nx">inherits</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">childCtor</span><span class="p">,</span> <span class="nx">parentCtor</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/** @constructor */</span>
    <span class="kd">function</span> <span class="nx">tempCtor</span><span class="p">()</span> <span class="p">{};</span>
    <span class="nx">tempCtor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">parentCtor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
    <span class="nx">childCtor</span><span class="p">.</span><span class="nx">superClass_</span> <span class="o">=</span> <span class="nx">parentCtor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
    <span class="nx">childCtor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">tempCtor</span><span class="p">();</span>
    <span class="nx">childCtor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">childCtor</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="cm">/*  Natural Sort algorithm for Javascript - Version 0.6 - Released under MIT license</span>
<span class="cm">   *  Author: Jim Palmer (based on chunking idea from Dave Koelle)</span>
<span class="cm">   *  Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo</span>
<span class="cm">   */</span>

  <span class="cm">/* naturalSort http://code.google.com/p/js-naturalsort/source/browse/trunk/naturalSort.js */</span>
  <span class="kd">var</span> <span class="nx">naturalSort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="sr">/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi</span><span class="p">,</span>
        <span class="nx">sre</span> <span class="o">=</span> <span class="sr">/(^[ ]*|[ ]*$)/g</span><span class="p">,</span>
        <span class="nx">dre</span> <span class="o">=</span> <span class="sr">/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/</span><span class="p">,</span>
        <span class="nx">hre</span> <span class="o">=</span> <span class="sr">/^0x[0-9a-f]+$/i</span><span class="p">,</span>
        <span class="nx">ore</span> <span class="o">=</span> <span class="sr">/^0/</span><span class="p">,</span>
        <span class="cm">/* convert all to strings and trim() */</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">sre</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="nx">sre</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="cm">/* chunk/tokenize */</span>
        <span class="nx">xN</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s1">&#39;\0$1\0&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\0$/</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\0/</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\0&#39;</span><span class="p">),</span>
        <span class="nx">yN</span> <span class="o">=</span> <span class="nx">y</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s1">&#39;\0$1\0&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\0$/</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\0/</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\0&#39;</span><span class="p">),</span>
        <span class="cm">/* numeric, hex or date detection */</span>
        <span class="nx">xD</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">hre</span><span class="p">))</span> <span class="o">||</span> <span class="p">(</span><span class="nx">xN</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">dre</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">x</span><span class="p">)),</span>
        <span class="nx">yD</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">y</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">hre</span><span class="p">))</span> <span class="o">||</span> <span class="nx">xD</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">dre</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>
    <span class="cm">/* first try and sort Hex codes or Dates */</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">yD</span><span class="p">)</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">xD</span> <span class="o">&lt;</span> <span class="nx">yD</span> <span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">xD</span> <span class="o">&gt;</span> <span class="nx">yD</span> <span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="cm">/* natural sorting through split numeric strings and default strings */</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">cLoc</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">numS</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">xN</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">yN</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span> <span class="nx">cLoc</span> <span class="o">&lt;</span> <span class="nx">numS</span><span class="p">;</span> <span class="nx">cLoc</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="cm">/* find floats not starting with &#39;0&#39;, string or 0 if not defined (Clint Priest) */</span>
      <span class="nx">oFxNcL</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">xN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="nx">ore</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">xN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">])</span> <span class="o">||</span> <span class="nx">xN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">oFyNcL</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">yN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">]</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="nx">ore</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">yN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">])</span> <span class="o">||</span> <span class="nx">yN</span><span class="p">[</span><span class="nx">cLoc</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="cm">/* handle numeric vs string comparison - number &lt; string - (Kyle Adams) */</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">oFxNcL</span><span class="p">)</span> <span class="o">!==</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">oFyNcL</span><span class="p">))</span> <span class="k">return</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">oFxNcL</span><span class="p">))</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> 
      <span class="cm">/* rely on string comparison if different types - i.e. &#39;02&#39; &lt; 2 != &#39;02&#39; &lt; &#39;2&#39; */</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">oFxNcL</span> <span class="o">!==</span> <span class="k">typeof</span> <span class="nx">oFyNcL</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">oFxNcL</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> 
        <span class="nx">oFyNcL</span> <span class="o">+=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span> 
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">oFxNcL</span> <span class="o">&lt;</span> <span class="nx">oFyNcL</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">oFxNcL</span> <span class="o">&gt;</span> <span class="nx">oFyNcL</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="cm">/*     Backbone.js 0.5.1</span>
<span class="cm">   *     (c) 2010 Jeremy Ashkenas, DocumentCloud Inc.</span>
<span class="cm">   *     Backbone may be freely distributed under the MIT license.</span>
<span class="cm">   *     For all details and documentation:</span>
<span class="cm">   *     http://documentcloud.github.com/backbone</span>
<span class="cm">   */</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Include escapeHTML from Backbone.js for direct access</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">escapeHTML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;(?!\w+;|#\d+;|#x[\da-f]+;)/gi</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;quot;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;#x27&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\//g</span><span class="p">,</span><span class="s1">&#39;&amp;#x2F;&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="cm">/*     Underscore.js 1.1.7</span>
<span class="cm">   *     (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.</span>
<span class="cm">   *     Underscore is freely distributable under the MIT license.</span>
<span class="cm">   *     Portions of Underscore are inspired or borrowed from Prototype,</span>
<span class="cm">   *     Oliver Steele&#39;s Functional, and John Resig&#39;s Micro-Templating.</span>
<span class="cm">   *     For all details and documentation:</span>
<span class="cm">   *     http://documentcloud.github.com/underscore</span>
<span class="cm">   */</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Versions of sortedIndex and sortBy from underscore.js that take two comparison functions:
one for getting the key and one for comparing two keys.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">sortedIndex2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">model</span><span class="p">,</span> <span class="nx">criteria</span><span class="p">,</span> <span class="nx">comparator</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">,</span> <span class="nx">low</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">high</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">low</span> <span class="o">&lt;</span> <span class="nx">high</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="p">(</span><span class="nx">low</span> <span class="o">+</span> <span class="nx">high</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">comparator</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">criteria</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">mid</span><span class="p">]),</span> <span class="k">this</span><span class="p">.</span><span class="nx">criteria</span><span class="p">(</span><span class="nx">model</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">low</span> <span class="o">=</span> <span class="nx">mid</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">high</span> <span class="o">=</span> <span class="nx">mid</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">low</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">sortBy2</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">criteria</span><span class="p">,</span> <span class="nx">comparator</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">models</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span><span class="p">,</span>
        <span class="nx">criteria</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">criteria</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">list</span><span class="p">)</span>
      <span class="p">};</span>
    <span class="p">}).</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">comparator</span><span class="p">(</span><span class="nx">left</span><span class="p">.</span><span class="nx">criteria</span><span class="p">,</span> <span class="nx">right</span><span class="p">.</span><span class="nx">criteria</span><span class="p">);</span>
    <span class="p">}),</span> <span class="s1">&#39;value&#39;</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">})(</span><span class="k">this</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 